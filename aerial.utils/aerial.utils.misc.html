<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>aerial.utils.misc documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Aerial.utils</span> <span class="project-version">1.2.0</span></span></a></h1></div><div class="sidebar primary"><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="intro.html"><div class="inner"><span>Introduction to utils</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>aerial</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></div></li><li class="depth-3 branch"><a href="aerial.utils.coll.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coll</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ds</span></div></div></li><li class="depth-4 branch"><a href="aerial.utils.ds.bktrees.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bktrees</span></div></a></li><li class="depth-4 branch"><a href="aerial.utils.ds.graphs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>graphs</span></div></a></li><li class="depth-4"><a href="aerial.utils.ds.trees.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>trees</span></div></a></li><li class="depth-3 branch"><a href="aerial.utils.io.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>io</span></div></a></li><li class="depth-3"><a href="aerial.utils.math.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>math</span></div></a></li><li class="depth-4 branch"><a href="aerial.utils.math.clustering.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clustering</span></div></a></li><li class="depth-4 branch"><a href="aerial.utils.math.combinatorics.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>combinatorics</span></div></a></li><li class="depth-4 branch"><a href="aerial.utils.math.infoth.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>infoth</span></div></a></li><li class="depth-4 branch"><a href="aerial.utils.math.probs-stats.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>probs-stats</span></div></a></li><li class="depth-4"><a href="aerial.utils.math.scores.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>scores</span></div></a></li><li class="depth-3 branch current"><a href="aerial.utils.misc.html"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>misc</span></div></a></li><li class="depth-3"><a href="aerial.utils.string.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>string</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="aerial.utils.misc.html#var-add-meta"><div class="inner"><span>add-meta</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-catch-all"><div class="inner"><span>catch-all</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-classpath"><div class="inner"><span>classpath</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-cpu-use"><div class="inner"><span>cpu-use</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-defnk"><div class="inner"><span>defnk</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-defparameter"><div class="inner"><span>defparameter</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-gen-kwuid"><div class="inner"><span>gen-kwuid</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-gen-uid"><div class="inner"><span>gen-uid</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-getenv"><div class="inner"><span>getenv</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-handler-case"><div class="inner"><span>handler-case</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-host-dns-name"><div class="inner"><span>host-dns-name</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-host-ipaddress"><div class="inner"><span>host-ipaddress</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-name-with-attrs"><div class="inner"><span>name-with-attrs</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-raise"><div class="inner"><span>raise</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-runx"><div class="inner"><span>runx</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-self-process-id"><div class="inner"><span>self-process-id</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-sleep"><div class="inner"><span>sleep</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-str-date"><div class="inner"><span>str-date</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-sys-properties"><div class="inner"><span>sys-properties</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-sys-property"><div class="inner"><span>sys-property</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-timefn"><div class="inner"><span>timefn</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-with-ckd"><div class="inner"><span>with-ckd</span></div></a></li><li class="depth-1"><a href="aerial.utils.misc.html#var-with-handled"><div class="inner"><span>with-handled</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">aerial.utils.misc</h1><div class="doc"><pre class="plaintext">General utility functions and macros.  Basically these resources
are fairly general and intended to be usable on most any part of
most any project</pre></div><div class="public anchor" id="var-add-meta"><h3>add-meta</h3><div class="usage"><code>(add-meta x m)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-catch-all"><h3>catch-all</h3><h4 class="type">macro</h4><div class="usage"><code>(catch-all &amp; forms)</code></div><div class="doc"><pre class="plaintext">FORMS wrapped by handlers and last ditch try/catch for standard exceptions.
For conditions, the condition info meta data map is returned. For exceptions,
the exception is converted to a string representation and that is returned.</pre></div></div><div class="public anchor" id="var-classpath"><h3>classpath</h3><div class="usage"><code>(classpath)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-cpu-use"><h3>cpu-use</h3><div class="usage"><code>(cpu-use &amp; {:keys [info], :or {info :idle}})</code></div><div class="doc"><pre class="plaintext">Obtain and return cpu utilization.  Requires the &apos;top&apos; command is
available, and takes the second of two samplings (first samples
from top are typically inaccurate).  INFO indicates the type of
information returned:

:idle, just the avg % idle, this is the default
:used, just the avg % used
:both, both idle and used

In  all cases  uses  aggregate cpu  utilization  over SMP  systems.
Values are returned as Doubles,  or for :both, a two element vector
of Doubles [idle used].
</pre></div></div><div class="public anchor" id="var-defnk"><h3>defnk</h3><h4 class="type">macro</h4><div class="usage"><code>(defnk name &amp; args-body)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-defparameter"><h3>defparameter</h3><h4 class="type">macro</h4><div class="usage"><code>(defparameter sym val)</code><code>(defparameter mmap sym val)</code></div><div class="doc"><pre class="plaintext">def with auto declaration of symbol SYM to be dynamic
</pre></div></div><div class="public anchor" id="var-gen-kwuid"><h3>gen-kwuid</h3><div class="usage"><code>(gen-kwuid)</code></div><div class="doc"><pre class="plaintext">Generates a unique keyword id whose name is the str of gen-uid
</pre></div></div><div class="public anchor" id="var-gen-uid"><h3>gen-uid</h3><div class="usage"><code>(gen-uid)</code></div><div class="doc"><pre class="plaintext">Generates a unique integer ID based on universal time.
</pre></div></div><div class="public anchor" id="var-getenv"><h3>getenv</h3><div class="usage"><code>(getenv ev)</code><code>(getenv)</code></div><div class="doc"><pre class="plaintext">Return the value of the environment variable EV (a string).
Optionally, (no argument variant) return a map of all the
environment variables.
</pre></div></div><div class="public anchor" id="var-handler-case"><h3>handler-case</h3><h4 class="type">macro</h4><div class="usage"><code>(handler-case form &amp; cases)</code></div><div class="doc"><pre class="plaintext">Hide some try+ details.  Form is the expression that is exception
protected.  Cases are handler arms of the form [c e &amp; body].  Where
c is the predicate for the case arm (with out preceding &apos;catch&apos;), e
is the variable (symbol) to hold the exception object and body is
the set of forms to execute.  Within body, the captured symbol
contextMap is holds the exception context map.
</pre></div></div><div class="public anchor" id="var-host-dns-name"><h3>host-dns-name</h3><div class="usage"><code>(host-dns-name)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-host-ipaddress"><h3>host-ipaddress</h3><div class="usage"><code>(host-ipaddress)</code></div><div class="doc"><pre class="plaintext">Obtain the host IP addresses (:inet4 and :inet6) for the machine on
which we are running. Returns a map of interfaces filtered for
being up, non virtual, and not the loopback, and their associated
vector of inet6 and inet4 addresses. For example:

{:eth0 {:inet6 [&quot;fe80:0:0:0:225:90ff:fe21:66d2%2&quot;],
        :inet4 [&quot;136.167.54.82&quot;]}}
</pre></div></div><div class="public anchor" id="var-name-with-attrs"><h3>name-with-attrs</h3><div class="usage"><code>(name-with-attrs name macro-args)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-raise"><h3>raise</h3><h4 class="type">macro</h4><div class="usage"><code>(raise &amp; args)</code></div><div class="doc"><pre class="plaintext">Wraps throw+ for throwing a map object.  Ensures that (count args)
is even, then places pairs into a map which is given to throw+
</pre></div></div><div class="public anchor" id="var-runx"><h3>runx</h3><div class="usage"><code>(runx program &amp; args)</code></div><div class="doc"><pre class="plaintext">RUNs an eXternal program PROGRAM (a string naming the program executable),
passing it the (typically, _command line_) arguments ARGS.  ARGS is either
a single vector or list of the arguments, or a sequential list of the
arguments given to the function as further arguments after the program.</pre></div></div><div class="public anchor" id="var-self-process-id"><h3>self-process-id</h3><div class="usage"><code>(self-process-id)</code></div><div class="doc"><pre class="plaintext">Return the process id of the running JVM.  Uses ManagementFactory
getRuntimeMXBean, which has a getName method.  The getName method
will _likely_ return name as: &lt;pid&gt;@&lt;host-name&gt;, as a string.  This
method then pulls off the pid from this and returns it as a string.
</pre></div></div><div class="public anchor" id="var-sleep"><h3>sleep</h3><div class="usage"><code>(sleep msecs)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-str-date"><h3>str-date</h3><div class="usage"><code>(str-date)</code><code>(str-date fm)</code><code>(str-date d fm)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-sys-properties"><h3>sys-properties</h3><div class="usage"><code>(sys-properties)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-sys-property"><h3>sys-property</h3><div class="usage"><code>(sys-property prop-name)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-timefn"><h3>timefn</h3><div class="usage"><code>(timefn f &amp; args)</code></div><div class="doc"><pre class="plaintext">Time the application of F (a function) to ARGS (any set of args as
expected by f.  Returns a two element vector [ret time] where,

ret is the return value of f

time is the time f took to compute ret in milliseconds
</pre></div></div><div class="public anchor" id="var-with-ckd"><h3>with-ckd</h3><h4 class="type">macro</h4><div class="usage"><code>(with-ckd &amp; forms)</code></div><div class="doc"><pre class="plaintext">FORMS wrapped by handlers and last ditch try/catch for standard exceptions.
For conditions, the condition info meta data map is returned. For exceptions,
the exception is converted to a string representation and that is returned.</pre></div></div><div class="public anchor" id="var-with-handled"><h3>with-handled</h3><h4 class="type">macro</h4><div class="usage"><code>(with-handled form &amp; conditions)</code></div><div class="doc"><pre class="plaintext">Wraps FORM in a slingshot try+ with catch arms for each condition
in CONDITIONS. Each handle arm catches the condition C and prints a
stack trace for it.  Hence, while this catches the conditions, it
stops execution.  For catch and continue see CATCH-ALL
</pre></div></div></div></body></html>